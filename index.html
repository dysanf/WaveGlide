<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>WaveGlide by nortd</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">WaveGlide</h1>
      <h2 class="project-tagline">An open hardware oxygen system for glider pilots.</h2>
      <a href="https://github.com/nortd/WaveGlide" class="btn">View on GitHub</a>
      <a href="https://github.com/nortd/WaveGlide/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/nortd/WaveGlide/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="waveglide-oxygen-system" class="anchor" href="#waveglide-oxygen-system" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>WaveGlide Oxygen System</h1>

<p>This project is in <strong>Alpha</strong> phase.</p>

<p>WaveGlide is an automatic oxygen delivery system for glider pilots. It prevents hypoxia at high altitudes by adding oxygen to the inhaled air. Unlike medical constant flow systems it pulses the oxygen supply at the beginning of the breathing cycle and automatically adapts oxygen levels to altitude.</p>

<p>The pulsing allows for higher efficiency and consequently smaller oxygen cylinders. Typically a 1l cylinder is sufficient for one 8h flight. This works because the majority of air inhaled does not reach the <a href="https://en.wikipedia.org/wiki/Pulmonary_alveolus">alveoli</a> and gets exhaled unused. The oxygen system therefore only oxygenates the inital air of every inhalation.</p>

<p>Altitude adapdation is crucial as well. The system compensatates for falling O<sub>2</sub> density at altitude by increasing the O<sub>2</sub> content (from the environmental 21% up to 100%). For this it measures the <a href="https://en.wikipedia.org/wiki/Pressure_altitude">pressure altitude</a> and adjusts the length of the oxygen pulse accordingly.</p>

<h2>
<a id="human-factors" class="anchor" href="#human-factors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Human Factors</h2>

<p><a href="https://en.wikipedia.org/wiki/Hypoxia_%28medical%29">Hypoxia</a> is a signifficant risk factor in aviation. It affects pilots in adverse ways and the effects often go unnoticed -- <em>You feel great until it's too late</em>. Since hypoxia affects brain function (et alii), all kinds of cognitive processes are less effective. Pilots tend to overlook slow running processes like weather changes, have reduced conditional readiness, generally lack creativity when dealing with unusual situations, have simplistic internal arguments, low level of suspicion, and reduced situational awareness.</p>

<p>The negative effects gradually increase with altitude but are alleviated by the body's ability to compensate for reduced oxygen density. This compensation varies greatly between people. Canonically speaking the first noticable effect is reduced night vision at 1500m (5000'). From 2000m (6500') to 3800m (12500') the body can compensate lower oxygen availability. Above this altitude compensation ceases to be effective. Blood oxygen level continually go down and cause increasingly more adverse effects. For example, useful time of consciousness (<a href="https://en.wikipedia.org/wiki/Hypoxia_%28medical%29">TUC</a>) in 4500m (15000') can be as low as 30 minutes. After this time, loss of consciousness is not unusual. In 7500m (25000') TUC is down to 4 minutes.</p>

<p>Many more factors skew these simple rules. Different people react differently and do so differently on different days.
For a more nuanced treatise on the effects of hypoxia and some good arguments to oxygenate early, see <a href="nullhypoxie.pdf">Nullhypoxie by Dr. med. Heini Schaffner</a>.</p>

<h2>
<a id="the-law" class="anchor" href="#the-law" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Law</h2>

<p>Most countries base their legal oxygen requirements on FAA's <a href="http://www.faa-aircraft-certification.com/91-211-supplemental-oxygen.html">FAR 91.211</a>: Oxygen must <strong>always</strong> be supplemented <strong>above 14000'</strong> (4267m) and above 12500' (3810m) after a duration of 30 minutes. Depending on country this may or may not apply for gliders.</p>

<ul>
<li>
<a href="http://www.dg-flugzeugbau.de/sauerstoff-d.html">Gebrauch von Sauerstoff</a> by Steele Lipe</li>
</ul>

<h2>
<a id="how-much-oxygen" class="anchor" href="#how-much-oxygen" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How much Oxygen?</h2>

<p>The goal is to maintain <strong>blood oxygen saturation above 90%</strong>. This can be measured non-invasively through <a href="https://en.wikipedia.org/wiki/Pulse_oximetry">pulse oxymetry</a>. A pulse oxymeter is a fairly cheap device which measures <a href="https://en.wikipedia.org/wiki/Oxygen_saturation_%28medicine%29">"sats"</a> (SpO<sub>2</sub>) through the skin. With these measurement we can then create a fitting default setting for base supply and altitude adaptation. Physiological differences are further handled by allowing the pilot to percentually  increase/decrease the supply.</p>

<p>Some care has to be taken to get correct measurements. Reduced blood circulation, cold extremities, excessive ambient light, nail polish, and ill-fitting probes can all skew the measurement.</p>

<ul>
<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/21718156">Pulse Oximetry at High Altitude.</a></li>
<li><a href="http://www.amperordirect.com/pc/c-pulse-oximeter/z-pulse-oximeter-limitations.html">Limitations in Using a Pulse Oximeter</a></li>
</ul>

<p>As a starting point we can look at the requirements of constant flow systems.</p>

<h2>
<a id="components" class="anchor" href="#components" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Components</h2>

<p>The oxygen systems is basically an oxygen cylinder which supplies additional oxygen to the pilot in a controlled way. The pressurized oxygen flows to the pilot due to the pressure differential.</p>

<p>At the top of the cylinder is a high pressure valve. This connects to a pressure regulator for controlling the constant flow rate. Then a tube runs to the WaveGlide Controller where a solenoid valve pulses the supply accordingly. The controller does this based on breathing rhythm and pressure altitude.</p>

<p>A nasal oxygen cannula gets the oxygen from the controller to the pilot. Additionally a mechanical flow meter in this tube supplies a reduandant reading of the system's proper function.</p>

<p><img src="img/waveglide.png" alt="waveglide"></p>

<h3>
<a id="oxygen-tank" class="anchor" href="#oxygen-tank" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Oxygen Tank</h3>

<ul>
<li>aluminium, medical (white in EU)</li>
<li>2l at 200bar -&gt; 400l of oxygen</li>
<li>connector: DIN477</li>
<li>about EUR 100 filled</li>
</ul>

<p><img src="img/gti-al-cylinder.png" alt="oxygen cylinder"></p>

<h3>
<a id="pressure-regulator" class="anchor" href="#pressure-regulator" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pressure Regulator</h3>

<ul>
<li>manometer for checking the oxygen level in the cylinder</li>
<li>flow rate dial (need 15l/min)</li>
<li>cylinder connector: DIN477</li>
<li>output: 9/16" male</li>
<li>O2 GTI Rescue 25</li>
<li>AeroWay Fast-15</li>
</ul>

<p><img src="img/gti-rescue-25.png" alt="pressure regulator"></p>

<h3>
<a id="solenoid-valve" class="anchor" href="#solenoid-valve" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Solenoid Valve</h3>

<ul>
<li>low wattage</li>
<li>12V</li>
<li>M5 connectors</li>
<li>quick connects, color coded</li>
</ul>

<p><img src="img/airtec.jpg" alt="valve"></p>

<h3>
<a id="controller" class="anchor" href="#controller" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Controller</h3>

<ul>
<li>Arduino-based</li>
<li>3.7V lipo battery

<ul>
<li>2000mA -&gt; 7.4W -&gt; 10h</li>
</ul>
</li>
<li>charging via micro-USB</li>
<li>12V boost converter

<ul>
<li>PTN04050CAD

<ul>
<li>100uF - ECA-1HM101</li>
</ul>
</li>
</ul>
</li>
<li>breath sensor

<ul>
<li>MPXV7002DP

<ul>
<li>1uF - USR1H010MDD</li>
<li>0.01uF - FK28C0G1H103J</li>
<li>470pF - K471J15C0GF53L2</li>
</ul>
</li>
</ul>
</li>
<li>barometric sensor

<ul>
<li>BMP180, adafruit board for prototyping</li>
</ul>
</li>
<li>solenoid circuitry

<ul>
<li>SSR, diode, 330 Ohm</li>
</ul>
</li>
<li>interface

<ul>
<li>STATUS

<ul>
<li>on/off LED (1x)</li>
<li>charging/full/low LED</li>
<li>inhale, exhale, oxygen phase (3x)</li>
</ul>
</li>
<li>DOSE TRIM

<ul>
<li>-, normal, +, max (4x)

<ul>
<li>max ignores start altitude</li>
</ul>
</li>
</ul>
</li>
<li>START ALTITUDE

<ul>
<li>1500m, 2800m, 3800m (3x)</li>
</ul>
</li>
<li>buzzer alarm (lack of oxygen flow)</li>
</ul>
</li>
<li>harness clip or arm strap</li>
</ul>

<h3>
<a id="nasal-cannula" class="anchor" href="#nasal-cannula" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Nasal Cannula</h3>

<ul>
<li>
<a href="http://www.teleflexarcatalog.com/anesthesia-respiratory/respiratory/products/15841">Hudson RCI 1104</a> (flared)</li>
</ul>

<h3>
<a id="tubing" class="anchor" href="#tubing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tubing</h3>

<ul>
<li>crush and kink-resistant</li>
<li>from pressure regulator to controller

<ul>
<li><a href="https://www.landefeld.de/artikel/en/polyamide-hose-6-x-4-mm-blue-by-meter/PA+6X4+BLAU">Plyamide hose, 6x4, blue</a></li>
</ul>
</li>
<li>to breathing sensor

<ul>
<li><a href="https://www.landefeld.de/artikel/en/polyamide-hose-4-x-2-7-mm-blue-by-meter/PA+4X2%2c7+BLAU">Polyamide hose 4x2.7 blue</a></li>
</ul>
</li>
</ul>

<h3>
<a id="tube-coupling" class="anchor" href="#tube-coupling" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tube Coupling</h3>

<ul>
<li><a href="https://www.landefeld.de/artikel/en/straight-push-in-fitting-m-5-6mm-model-series-topline/RIB+01+06+05">coupling M5, 4mm</a></li>
<li>
<a href="https://www.landefeld.de/artikel/en/straight-push-in-fitting-m-5-6mm-model-series-topline/RIB+01+06+05">coupling M5, 6mm</a>, 2x</li>
</ul>

<h3>
<a id="oxygen-flow-meter" class="anchor" href="#oxygen-flow-meter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Oxygen Flow Meter</h3>

<ul>
<li><a href="http://www.nelsonoxygen.com/meters.htm">Nelson A3 flow meter</a></li>
</ul>

<h2>
<a id="firmware" class="anchor" href="#firmware" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Firmware</h2>

<p>The firmware runs on a stipped down Arduino (Atmege328, Adafruit Trinket Pro):</p>

<h2>
<a id="prototyping-progress" class="anchor" href="#prototyping-progress" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Prototyping Progress</h2>

<h3>
<a id="breathing-sensor" class="anchor" href="#breathing-sensor" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Breathing Sensor</h3>

<p>Intitial tests of the MPXV7002G differential piezo pressure sensor show a very nice response. Even very light breathing is detectable via the nasal cannula.</p>

<p>The start of the oxygen pulse should be at the mid-point following a high point. To not miss any inhaled air the pulse should even be initiated slightly earlier. Measuring the previous period and detecting the high-point should be plenty sufficient.</p>

<p><img src="img/breathing-sensor.jpg" alt="MPXV7002G">
<img src="img/cannula-breathing-graph.png" alt="sensor response">
<img src="img/waveglide-case.jpg" alt="case">
<img src="img/waveglide-system.jpg" alt="system"></p>

<h2>
<a id="resources" class="anchor" href="#resources" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Resources</h2>

<ul>
<li><a href="http://www.alpenflugzentrum.de/Technik/Artikel/o2.html">Oxygen usage and refilling</a></li>
<li><a href="http://sgbaselfricktal.ch/sauerstoff-im-segelflug/">Vortrag Dr. med. Schaffner</a></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/nortd/WaveGlide">WaveGlide</a> is maintained by <a href="https://github.com/nortd">nortd</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
